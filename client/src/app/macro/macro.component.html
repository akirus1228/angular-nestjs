<div [dir]="i18nService.dir">
    <div class="content" *ngIf="currentTemplate" fxFlex>
        <div fxLayoutAlign="end" style="width: 497px" class="wrapperCategories" [ngClass]="{ open: isOpen, close: !isOpen }">
            <mat-grid-tile class="templates">
                <div fxFill fxLayout="column" fxLayoutAlign="center center" style="background: white">
                    <p-autocomplete
                        style="width: 80%;height: 20%;"
                        *ngIf="seriesGroupsSettings"
                        (selectedChange)="filterSelected($event)"
                        [settings]="seriesGroupsSettings"
                        [freeText]="true"
                    ></p-autocomplete>
                    <div fxFlex fxFlexAlign="center">
                        <div fxLayout="column">
                            <span fxLayoutAlign=" center " style="height: 40px" *ngFor="let id of currentTemplate.seriesIds">
                                <i
                                    fxLayoutAlign=" center center"
                                    class="material-icons"
                                    style="color:#bfbfbf;padding: 0 0.5em"
                                    (click)="onSelectSeries(false, seriesDic[id])"
                                >
                                    close
                                </i>
                                {{ seriesDic[id].title }}
                            </span>
                        </div>
                    </div>

                    <form [formGroup]="dateForm" style="height: 30%">
                        <mat-form-field>
                            <input matInput placeholder="Choose a date" [satDatepicker]="picker4" formControlName="date" />
                            <sat-datepicker #picker4 [rangeMode]="true" orderPeriodLabel="year"> </sat-datepicker>
                            <sat-datepicker-toggle matSuffix [for]="picker4"></sat-datepicker-toggle>
                        </mat-form-field>
                        <div class="wrapperbutton"></div>
                        <button class="button" (click)="download()" mat-button>
                            <div fxLayout="column" fxLayoutAlign="center center">
                                <svg width="24" height="24" viewBox="0 0 24 24">
                                    <path
                                        fill="#212121"
                                        fill-rule="evenodd"
                                        d="M2 2h20v20H2V2zm2 2v4h4V4H4zm0 6v4h4v-4H4zm0 6v4h4v-4H4zm6-12v4h4V4h-4zm0 6v4h4v-4h-4zm0 6v4h4v-4h-4zm6-12v4h4V4h-4zm0 6v4h4v-4h-4zm0 6v4h4v-4h-4z"
                                    />
                                </svg>

                                <span> View Table</span>
                            </div>
                        </button>
                        <button class="button" (click)="download()" mat-button>
                            <div fxLayout="column" fxLayoutAlign="center center">
                                <svg width="24" height="24" viewBox="0 0 24 24">
                                    <path
                                        fill="#212121"
                                        fill-rule="nonzero"
                                        d="M11.5 3l-10 2v14l10 2V3zm2 2v2h2v2h-2v2h2v2h-2v2h2v2h-2v2h7a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-7zm4 2h2v2h-2V7zM3.676 8.297h1.777l.924 2.215c.075.18.131.39.19.629h.025c.033-.143.1-.362.201-.647l1.03-2.197h1.62l-1.935 3.67L9.5 15.703H7.771L6.658 13.29a2.053 2.053 0 0 1-.133-.494H6.51a5.91 5.91 0 0 1-.15.514l-1.124 2.394H3.5l2.06-3.707-1.884-3.7zM17.5 11h2v2h-2v-2zm0 4h2v2h-2v-2z"
                                    />
                                </svg>
                                <span> Download .xls</span>
                            </div>
                        </button>
                    </form>
                </div>
            </mat-grid-tile>
        </div>
        <span class="en-he" (click)="changeDirection()">eng_Heb</span>

        <div class="wrapperCategories" fxLayoutAlign="end" fxFlex [ngClass]="{ open: isOpen, close: !isOpen }">
            <div fxLayoutAlign="start" style="width: 95%;height: 100%;">
                <div class="categories">
                    <div fxLayout="column" style="height:100%;width:70%;padding: 60px" style="display: contents">
                        <div fxFlex="93.6%" fxLayoutAlign="end end" style="width: 104%;height: 29%">
                            <svg style="padding-bottom: 1.5em" width="245" height="16" viewBox="0 0 245 16">
                                <g fill="#212121" fill-rule="evenodd">
                                    <path
                                        d="M120.223 8.238V15H117V8.238h3.223zM127.11 1v14h-3.222V1h3.222zM134 5.136V15h-3.223V5.136H134zM70.307 1v13.747H67V1h3.307zm8.892 0c1.74 0 3.18.46 4.322 1.38 1.14.92 1.879 2.165 2.214 3.734h-3.5a3.226 3.226 0 0 0-1.19-1.497c-.534-.363-1.17-.545-1.904-.545-.967 0-1.747.357-2.34 1.07-.593.713-.89 1.665-.89 2.858s.297 2.142.89 2.849c.593.706 1.373 1.06 2.34 1.06.735 0 1.37-.182 1.905-.545a3.24 3.24 0 0 0 1.189-1.478h3.5c-.335 1.556-1.073 2.797-2.214 3.724S80.939 15 79.199 15c-1.328 0-2.495-.295-3.5-.885a5.991 5.991 0 0 1-2.33-2.479c-.548-1.063-.822-2.275-.822-3.636 0-1.361.274-2.573.822-3.636a5.991 5.991 0 0 1 2.33-2.48c1.005-.59 2.172-.884 3.5-.884zm18.892.136v2.645h-3.713v11.102h-3.326V3.781h-3.674V1.136h10.713zm10.539 11.239h-5.124l-.851 2.508h-3.481l5.008-13.65h3.81L113 14.883h-3.52l-.85-2.508zm-.851-2.528l-1.702-5.055-1.72 5.055h3.422zM4.267 10.09V15H1V1h5.291c1.605 0 2.828.413 3.668 1.238.84.825 1.26 1.937 1.26 3.336 0 .872-.187 1.647-.563 2.327-.375.68-.933 1.215-1.671 1.604-.739.39-1.637.584-2.694.584H4.267zm1.661-2.714c1.312 0 1.968-.6 1.968-1.802 0-1.227-.656-1.841-1.968-1.841H4.267v3.643h1.661zM20.428 15l-2.923-5.287h-.745V15h-3.267V1h5.578c1.07 0 1.974.191 2.713.574.738.383 1.292.908 1.661 1.575.37.666.554 1.429.554 2.287 0 1.016-.27 1.88-.811 2.594-.542.713-1.328 1.201-2.36 1.465L24.038 15h-3.61zM16.76 7.396h2.024c.65 0 1.127-.148 1.433-.446.306-.297.459-.735.459-1.316 0-.555-.156-.99-.468-1.307-.312-.317-.787-.476-1.424-.476H16.76v3.545zm17.918 5.05h-5.062L28.775 15h-3.438l4.947-13.901h3.763L38.995 15h-3.477l-.84-2.554zm-.84-2.575l-1.682-5.148-1.7 5.148h3.381zM44.19 3.693v2.93h4.565v2.555h-4.565v3.11h5.138V15h-8.405V1h8.405v2.693h-5.138zM64 7.97c0 1.373-.283 2.591-.85 3.654a6.062 6.062 0 0 1-2.445 2.485c-1.064.594-2.315.891-3.754.891h-5.1V1h5.1c1.452 0 2.706.29 3.763.871a5.967 5.967 0 0 1 2.436 2.456c.567 1.056.85 2.27.85 3.643zm-7.335 4c1.273 0 2.263-.35 2.97-1.05.707-.699 1.06-1.682 1.06-2.95 0-1.267-.353-2.25-1.06-2.95-.707-.7-1.697-1.05-2.97-1.05h-1.548v8h1.548z"
                                    />
                                    <path
                                        fill-rule="nonzero"
                                        d="M194.518 1v13.862h-3.338V6.193l-2.967 8.669h-2.889l-2.986-8.689v8.689H179V1h4.08l3.728 9.656L190.458 1h4.06zm7.125 2.705c.832 0 1.548.191 2.147.573a3.432 3.432 0 0 1 1.327 1.56V3.843h3.318v11.019h-3.318v-1.995a3.432 3.432 0 0 1-1.327 1.56c-.599.382-1.315.573-2.147.573-.898 0-1.702-.227-2.411-.681-.71-.454-1.269-1.11-1.679-1.965-.41-.856-.615-1.856-.615-3.001 0-1.159.205-2.163.615-3.012.41-.849.97-1.5 1.679-1.955.71-.454 1.513-.68 2.41-.68zm1.073 2.962c-.716 0-1.291.237-1.727.711-.436.474-.654 1.132-.654 1.975 0 .842.218 1.5.654 1.974.436.474 1.011.711 1.727.711.703 0 1.279-.243 1.728-.73.449-.488.673-1.14.673-1.955 0-.83-.224-1.485-.673-1.965-.45-.48-1.025-.72-1.728-.72zm13.625-2.962c1.405 0 2.583.392 3.533 1.175.95.783 1.548 1.86 1.796 3.229h-3.533c-.104-.474-.32-.843-.645-1.106-.325-.263-.735-.395-1.23-.395-.585 0-1.066.234-1.444.7-.377.468-.566 1.15-.566 2.045s.189 1.576.566 2.043c.378.468.86.701 1.445.701.494 0 .904-.131 1.23-.395.325-.263.54-.631.644-1.105h3.533c-.248 1.369-.846 2.445-1.796 3.228-.95.783-2.128 1.175-3.533 1.175-1.067 0-2.014-.227-2.84-.681a4.84 4.84 0 0 1-1.942-1.965c-.469-.856-.703-1.856-.703-3.001 0-1.159.23-2.163.693-3.012.462-.849 1.11-1.5 1.942-1.955.833-.454 1.783-.68 2.85-.68zm11.087 2.212a4.763 4.763 0 0 1 1.61-1.6 4.075 4.075 0 0 1 2.138-.592v3.614h-.957c-.885 0-1.571.19-2.06.572-.487.382-.731 1.027-.731 1.935v5.016h-3.338V3.843h3.338v2.074zm10.93-2.212c1.08 0 2.047.227 2.9.681a4.963 4.963 0 0 1 2.01 1.965c.488.856.732 1.856.732 3.002 0 1.145-.244 2.145-.732 3.001a4.963 4.963 0 0 1-2.01 1.965c-.853.454-1.82.681-2.9.681-1.08 0-2.049-.227-2.908-.681a4.947 4.947 0 0 1-2.02-1.965c-.488-.856-.732-1.856-.732-3.001 0-1.146.244-2.146.732-3.002a4.947 4.947 0 0 1 2.02-1.965c.86-.454 1.829-.68 2.909-.68zm0 2.923c-.637 0-1.174.233-1.61.7-.435.468-.653 1.143-.653 2.025 0 .882.218 1.553.653 2.014.436.46.973.69 1.61.69.638 0 1.172-.23 1.601-.69.43-.461.645-1.132.645-2.014 0-.882-.215-1.557-.645-2.024a2.085 2.085 0 0 0-1.6-.701z"
                                    />
                                    <path d="M169 7v2h-25V7z" />
                                </g>
                            </svg>
                        </div>
                        <div fxFlex style="height: 40px;width:106%;">
                            <mat-form-field fxFlex style="text-align: end">
                                <div fxFlex="100%" fxLayout="row">
                                    <i fxLayoutAlign=" end" class="material-icons" style="color:#bfbfbf">
                                        close
                                    </i>
                                    <input id="input" matInput [placeholder]="'חיפוש'" [formControl]="input" />
                                </div>
                            </mat-form-field>

                            <i fxLayoutAlign="start end" class="material-icons" style="color:#bfbfbf;padding: 0 0.5em;">
                                search
                            </i>
                        </div>
                        <mat-accordion [multi]="true" fxFlex>
                            <mat-expansion-panel>
                                <mat-expansion-panel-header fxLayoutAlign="center center  " (click)="isOpen = !isOpen"
                                    ><span style="width: 100%" fxLayoutAlign="center center">קטגוריות</span>
                                </mat-expansion-panel-header>
                                <div style="height: 400px;overflow: scroll;">
                                    <p-tree [data]="categories" (select)="onSelectCategory($event)"></p-tree>
                                </div>
                            </mat-expansion-panel>
                            <div style="position: fixed;width: 100%;height: 100%;overflow: auto">
                                <mat-expansion-panel style="height: 100%;" [expanded]="true">
                                    <cdk-virtual-scroll-viewport style="height: 100%;" itemSize="40">
                                        <div
                                            class="aaa"
                                            style="height: 40px;"
                                            *cdkVirtualFor="let option of filteredOptions | async"
                                        >
                                            <mat-checkbox
                                                (change)="onSelectSeries($event.checked, option)"
                                                [checked]="selectedSeries[option.sId]"
                                            ></mat-checkbox>
                                            {{ option.sId + ', ' + option.name }}
                                        </div>
                                    </cdk-virtual-scroll-viewport>
                                </mat-expansion-panel>
                            </div>
                        </mat-accordion>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
