<mat-form-field style="width: 100%;" #matForm [appearance]="appearance">
    <mat-chip-list *ngIf="chips">
        <mat-chip
            *ngFor="let selectedOption of settings?.selected"
            [removable]="true"
            (removed)="optionDeSelected(selectedOption)"
        >
            {{ selectedOption.name }}
            <mat-icon matChipRemove>cancel</mat-icon>
        </mat-chip>
    </mat-chip-list>

    <input id="input" matInput [placeholder]="placeholder" [matAutocomplete]="auto" [formControl]="input" />
    <mat-autocomplete
        #auto="matAutocomplete"
        [displayWith]="displayFn"
        [class.maxHight]="keepOpen"
        (optionSelected)="optionSelected($event.option.value)"
    >
        <mat-option
            *ngFor="let option of filteredOptions | async"
            [class.selected]="keepOpen && settings.selected && settings.selected._id === option._id"
            [value]="option"
        >
            <div fxLayout="row" fxFlex>
                <span fxFlex> {{ option.name }}</span>
                <div fxFlex="20px" [title]="removeTitle">
                    <mat-icon fxFlexstyle="cursor: pointer;" (click)="remove(option)">clear</mat-icon>
                </div>
            </div>
        </mat-option>
    </mat-autocomplete>
</mat-form-field>
